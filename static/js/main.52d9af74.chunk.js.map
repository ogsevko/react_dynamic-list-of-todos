{"version":3,"sources":["api/getData.ts","components/TodoItem.tsx","components/TodoList.tsx","App.tsx","index.tsx"],"names":["getData","API","fetch","then","response","json","fetchedData","data","catch","error","TodoItem","todo","className","type","checked","completed","title","userName","TodoList","todos","map","item","key","id","App","state","isLoading","filterBy","loadTodos","users","setState","usersFromServer","todosFromServer","todoCopy","userForTodo","find","user","userId","name","handleFilter","value","prevState","sort","a","b","localeCompare","this","length","onClick","defaultValue","onChange","event","target","disabled","Boolean","React","Component","ReactDOM","render","document","getElementById"],"mappings":"0PAAO,SAASA,EAAYC,GAC1B,OAAOC,MAAMD,GACVE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAAW,OAAIA,EAAYC,QAChCC,OAAM,SAAAC,GAAK,OAAIA,KCGb,IAAMC,EAA4B,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OACvC,wBAAIC,UAAU,cACZ,2BAAOC,KAAK,WAAWC,QAASH,EAAKI,YACrC,0BAAMH,UAAU,oBAAoBD,EAAKK,OACzC,0BAAMJ,UAAU,mBAAmBD,EAAKM,YCH/BC,EAA4B,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OACvC,wBAAIP,UAAU,QAEVO,EAAMC,KAAI,SAACC,GAAD,OACR,kBAAC,EAAD,CAAUC,IAAKD,EAAKE,GAAIZ,KAAMU,SCiHvBG,E,4MAhHbC,MAAe,CACbN,MAAO,GACPO,WAAW,EACXC,SAAU,I,EAGZC,UAAY,WACV,IAEIC,EAEJ,EAAKC,SAAS,CACZJ,WAAW,IAGb1B,EAPkB,2CAQfG,MAAK,SAAC4B,GACLF,EAAQE,KAGZ/B,EAbkB,2CAcfG,MAAK,SAAC6B,GACL,EAAKF,SAAS,CACZX,MAAOa,EAAgBZ,KAAI,SAACT,GAC1B,IAAMsB,EAAQ,eAAQtB,GAChBuB,EAAcL,EAAMM,MAAK,SAAAC,GAAI,OAAIA,EAAKb,KAAOZ,EAAK0B,UAIxD,OAFAJ,EAAShB,SAAWiB,EAAcA,EAAYI,KAAO,GAE9CL,KAETP,WAAW,Q,EAKnBa,aAAe,SAACC,GACA,UAAVA,GACF,EAAKV,UAAS,SAAAW,GAAS,MAAK,CAC1BtB,MAAOsB,EAAUtB,MAAMuB,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAE3B,MAAM6B,cAAcD,EAAE5B,UAC9DW,SAAUa,MAIA,aAAVA,GACF,EAAKV,UAAS,SAAAW,GAAS,MAAK,CAC1BtB,MAAOsB,EAAUtB,MAAMuB,MAAK,SAACC,EAAGC,GAC9B,OAAID,EAAE1B,UAAY2B,EAAE3B,SACX0B,EAAE1B,SAAS4B,cAAcD,EAAE3B,UAG7B,KAETU,SAAUa,MAIA,cAAVA,GACF,EAAKV,UAAS,SAAAW,GAAS,MAAK,CAC1BtB,MAAOsB,EAAUtB,MAAMuB,MAAK,SAACC,EAAGC,GAC9B,OAAID,EAAE5B,YAAc6B,EAAE7B,UACb,EAGL4B,EAAE5B,WACI,EAGH,KAETY,SAAUa,O,uDAKN,IAAD,SACsBM,KAAKrB,MAA1BN,EADD,EACCA,MAER,OAHO,EACQO,UAGN,4CAGY,IAAjBP,EAAM4B,OAEN,4BACElC,KAAK,SACLmC,QAASF,KAAKlB,WAFhB,cAUF,6BACE,4BACEU,KAAK,WACLE,MAAOM,KAAKrB,MAAME,SAClBsB,aAAa,GACbC,SAAU,SAAAC,GAAK,OAAI,EAAKZ,aAAaY,EAAMC,OAAOZ,SAElD,4BAAQA,MAAM,GAAGa,SAAUC,QAAQR,KAAKrB,MAAME,WAA9C,KACA,4BAAQa,MAAM,SAAd,SACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,YAAd,cAEF,kBAAC,EAAD,CAAUrB,MAAO2B,KAAKrB,MAAMN,a,GA3GlBoC,IAAMC,WCRxBC,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,U","file":"static/js/main.52d9af74.chunk.js","sourcesContent":["export function getData <T>(API: string): Promise<T[]> {\n  return fetch(API)\n    .then(response => response.json())\n    .then(fetchedData => fetchedData.data)\n    .catch(error => error);\n}\n","import React from 'react';\nimport { Todo } from './Interfaces';\n\ninterface Props {\n  todo: Todo;\n}\n\nexport const TodoItem: React.FC<Props> = ({ todo }) => (\n  <li className=\"list__item\">\n    <input type=\"checkbox\" checked={todo.completed} />\n    <span className=\"list__item-title\">{todo.title}</span>\n    <span className=\"list__item-user\">{todo.userName}</span>\n  </li>\n);\n","import React from 'react';\nimport { Todo } from './Interfaces';\nimport { TodoItem } from './TodoItem';\n\ninterface Props {\n  todos: Todo[];\n}\n\nexport const TodoList: React.FC<Props> = ({ todos }) => (\n  <ul className=\"list\">\n    {\n      todos.map((item: Todo) => (\n        <TodoItem key={item.id} todo={item} />\n      ))\n    }\n  </ul>\n);\n","import React from 'react';\nimport './App.css';\nimport { Todo, User } from './components/Interfaces';\nimport { getData } from './api/getData';\nimport { TodoList } from './components/TodoList';\n\ntype State = {\n  todos: Todo[];\n  isLoading: boolean;\n  filterBy: string;\n};\n\nclass App extends React.Component<{}, State> {\n  state: State = {\n    todos: [],\n    isLoading: false,\n    filterBy: '',\n  };\n\n  loadTodos = () => {\n    const API_TODOS = 'https://mate.academy/students-api/todos';\n    const API_USERS = 'https://mate.academy/students-api/users';\n    let users: User[];\n\n    this.setState({\n      isLoading: true,\n    });\n\n    getData<User>(API_USERS)\n      .then((usersFromServer: User[]) => {\n        users = usersFromServer;\n      });\n\n    getData<Todo>(API_TODOS)\n      .then((todosFromServer: Todo[]) => {\n        this.setState({\n          todos: todosFromServer.map((todo) => {\n            const todoCopy = { ...todo };\n            const userForTodo = users.find(user => user.id === todo.userId);\n\n            todoCopy.userName = userForTodo ? userForTodo.name : '';\n\n            return todoCopy;\n          }),\n          isLoading: false,\n        });\n      });\n  };\n\n  handleFilter = (value: string) => {\n    if (value === 'title') {\n      this.setState(prevState => ({\n        todos: prevState.todos.sort((a, b) => a.title.localeCompare(b.title)),\n        filterBy: value,\n      }));\n    }\n\n    if (value === 'userName') {\n      this.setState(prevState => ({\n        todos: prevState.todos.sort((a, b) => {\n          if (a.userName && b.userName) {\n            return a.userName.localeCompare(b.userName);\n          }\n\n          return 0;\n        }),\n        filterBy: value,\n      }));\n    }\n\n    if (value === 'completed') {\n      this.setState(prevState => ({\n        todos: prevState.todos.sort((a, b) => {\n          if (a.completed === b.completed) {\n            return 0;\n          }\n\n          if (a.completed) {\n            return -1;\n          }\n\n          return 1;\n        }),\n        filterBy: value,\n      }));\n    }\n  };\n\n  render() {\n    const { todos, isLoading } = this.state;\n\n    if (isLoading) {\n      return <span>Loading...</span>;\n    }\n\n    if (todos.length === 0) {\n      return (\n        <button\n          type=\"button\"\n          onClick={this.loadTodos}\n        >\n          Load todos\n        </button>\n      );\n    }\n\n    return (\n      <div>\n        <select\n          name=\"filterBy\"\n          value={this.state.filterBy}\n          defaultValue=\"\"\n          onChange={event => this.handleFilter(event.target.value)}\n        >\n          <option value=\"\" disabled={Boolean(this.state.filterBy)}> </option>\n          <option value=\"title\">Title</option>\n          <option value=\"completed\">Completed</option>\n          <option value=\"userName\">User name</option>\n        </select>\n        <TodoList todos={this.state.todos} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}